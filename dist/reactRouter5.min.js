!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.reactRouter5={},e.React)}(this,function(e,t){"use strict";var r="default"in t?t.default:t;var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var u=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,u,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var s in r=Object(arguments[c]))o.call(r,s)&&(a[s]=r[s]);if(n){u=n(r);for(var l=0;l<u.length;l++)i.call(r,u[l])&&(a[u[l]]=r[u[l]])}}return a},a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},d=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},v=function(){};if("production"!==process.env.NODE_ENV){var y=a,h={};v=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}var b=function(e,t,r,n,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(e.hasOwnProperty(i)){var u;try{if("function"!=typeof e[i]){var a=Error((n||"React class")+": "+r+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+c(e[i])+"`.");throw a.name="Invariant Violation",a}u=e[i](t,i,n,r,null,y)}catch(e){u=e}if(!u||u instanceof Error||v((n||"React class")+": type specification of "+r+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+(void 0===u?"undefined":c(u))+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),u instanceof Error&&!(u.message in h)){h[u.message]=!0;var s=o?o():"";v("Failed "+r+" type: "+u.message+(null!=s?s:""))}}},m=function(){};function g(){return null}"production"!==process.env.NODE_ENV&&(m=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});var O=function(e,t){var r="function"==typeof Symbol&&Symbol.iterator,n="@@iterator";var o="<<anonymous>>",i={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:f(g),arrayOf:function(e){return f(function(t,r,n,o,i){if("function"!=typeof e)return new l("Property `"+i+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var u=t[r];if(!Array.isArray(u)){var c=v(u);return new l("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+n+"`, expected an array.")}for(var s=0;s<u.length;s++){var f=e(u,s,n,o,i+"["+s+"]",a);if(f instanceof Error)return f}return null})},element:function(){return f(function(t,r,n,o,i){var u=t[r];if(!e(u)){var a=v(u);return new l("Invalid "+o+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected a single ReactElement.")}return null})}(),instanceOf:function(e){return f(function(t,r,n,i,u){if(!(t[r]instanceof e)){var a=e.name||o,c=function(e){if(!e.constructor||!e.constructor.name)return o;return e.constructor.name}(t[r]);return new l("Invalid "+i+" `"+u+"` of type `"+c+"` supplied to `"+n+"`, expected instance of `"+a+"`.")}return null})},node:function(){return f(function(e,t,r,n,o){if(!d(e[t]))return new l("Invalid "+n+" `"+o+"` supplied to `"+r+"`, expected a ReactNode.");return null})}(),objectOf:function(e){return f(function(t,r,n,o,i){if("function"!=typeof e)return new l("Property `"+i+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var u=t[r],c=v(u);if("object"!==c)return new l("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+n+"`, expected an object.");for(var s in u)if(u.hasOwnProperty(s)){var f=e(u,s,n,o,i+"."+s,a);if(f instanceof Error)return f}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&m("Invalid argument supplied to oneOf, expected an instance of array."),g;return f(function(t,r,n,o,i){for(var u=t[r],a=0;a<e.length;a++)if(s(u,e[a]))return null;var c=JSON.stringify(e);return new l("Invalid "+o+" `"+i+"` of value `"+u+"` supplied to `"+n+"`, expected one of "+c+".")})},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&m("Invalid argument supplied to oneOfType, expected an instance of array."),g;for(var t=0;t<e.length;t++){var r=e[t];if("function"!=typeof r)return m("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+h(r)+" at index "+t+"."),g}return f(function(t,r,n,o,i){for(var u=0;u<e.length;u++){var c=e[u];if(null==c(t,r,n,o,i,a))return null}return new l("Invalid "+o+" `"+i+"` supplied to `"+n+"`.")})},shape:function(e){return f(function(t,r,n,o,i){var u=t[r],c=v(u);if("object"!==c)return new l("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+n+"`, expected `object`.");for(var s in e){var f=e[s];if(f){var p=f(u,s,n,o,i+"."+s,a);if(p)return p}}return null})},exact:function(e){return f(function(t,r,n,o,i){var c=t[r],s=v(c);if("object"!==s)return new l("Invalid "+o+" `"+i+"` of type `"+s+"` supplied to `"+n+"`, expected `object`.");var f=u({},t[r],e);for(var p in f){var d=e[p];if(!d)return new l("Invalid "+o+" `"+i+"` key `"+p+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(t[r],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var y=d(c,p,n,o,i+"."+p,a);if(y)return y}return null})}};function s(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function l(e){this.message=e,this.stack=""}function f(e){if("production"!==process.env.NODE_ENV)var r={},n=0;function i(i,u,c,s,f,p,d){if(s=s||o,p=p||c,d!==a){if(t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var y=s+":"+c;!r[y]&&n<3&&(m("You are manually calling a React.PropTypes validation function for the `"+p+"` prop on `"+s+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),r[y]=!0,n++)}}return null==u[c]?i?null===u[c]?new l("The "+f+" `"+p+"` is marked as required in `"+s+"`, but its value is `null`."):new l("The "+f+" `"+p+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(u,c,s,f,p)}var u=i.bind(null,!1);return u.isRequired=i.bind(null,!0),u}function p(e){return f(function(t,r,n,o,i,u){var a=t[r];return v(a)!==e?new l("Invalid "+o+" `"+i+"` of type `"+y(a)+"` supplied to `"+n+"`, expected `"+e+"`."):null})}function d(t){switch(void 0===t?"undefined":c(t)){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(d);if(null===t||e(t))return!0;var o=function(e){var t=e&&(r&&e[r]||e[n]);if("function"==typeof t)return t}(t);if(!o)return!1;var i,u=o.call(t);if(o!==t.entries){for(;!(i=u.next()).done;)if(!d(i.value))return!1}else for(;!(i=u.next()).done;){var a=i.value;if(a&&!d(a[1]))return!1}return!0;default:return!1}}function v(e){var t=void 0===e?"undefined":c(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function y(e){if(void 0===e||null===e)return""+e;var t=v(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function h(e){var t=y(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return l.prototype=Error.prototype,i.checkPropTypes=b,i.PropTypes=i,i};function k(){}var j,R=(function(e){if("production"!==process.env.NODE_ENV){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=O(function(e){return"object"===(void 0===e?"undefined":c(e))&&null!==e&&e.$$typeof===t},!0)}else e.exports=function(){function e(e,t,r,n,o,i){if(i!==a){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return r.checkPropTypes=k,r.PropTypes=r,r}()}(j={exports:{}},j.exports),j.exports),w=function(e){function t(e,r){s(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.router=r.router,n.router.hasPlugin("BROWSER_PLUGIN")||console.error("[react-router5][BaseLink] missing browser plugin, href might be built incorrectly"),n.isActive=n.isActive.bind(n),n.clickHandler=n.clickHandler.bind(n),n.callback=n.callback.bind(n),n.state={active:n.isActive()},n}return p(t,e),l(t,[{key:"buildUrl",value:function(e,t){return this.router.buildUrl?this.router.buildUrl(e,t):this.router.buildPath(e,t)}},{key:"isActive",value:function(){return this.router.isActive(this.props.routeName,this.props.routeParams,this.props.activeStrict,this.props.ignoreQueryParams)}},{key:"callback",value:function(e,t){!e&&this.props.successCallback&&this.props.successCallback(t),e&&this.props.errorCallback&&this.props.errorCallback(e)}},{key:"clickHandler",value:function(e){var t=this.props,r=t.onClick,n=t.target;if(!r||(r(e),!e.defaultPrevented)){var o=e.metaKey||e.altKey||e.ctrlKey||e.shiftKey;0!==e.button||o||"_blank"===n||(e.preventDefault(),this.router.navigate(this.props.routeName,this.props.routeParams,this.props.routeOptions,this.callback))}}},{key:"render",value:function(){var e=this.props,t=e.routeName,n=e.routeParams,o=(e.routeOptions,e.className),i=e.activeClassName,u=(e.activeStrict,e.ignoreQueryParams,e.route,e.previousRoute,e.router,e.children),a=(e.onClick,e.successCallback,e.errorCallback,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["routeName","routeParams","routeOptions","className","activeClassName","activeStrict","ignoreQueryParams","route","previousRoute","router","children","onClick","successCallback","errorCallback"])),c=this.isActive(),s=this.buildUrl(t,n),l=(c?[i]:[]).concat(o?o.split(" "):[]).join(" ");return r.createElement("a",f({},a,{href:s,className:l,onClick:this.clickHandler}),u)}}]),t}(t.Component);w.contextTypes={router:R.object.isRequired},w.propTypes={routeName:R.string.isRequired,routeParams:R.object,routeOptions:R.object,activeClassName:R.string,activeStrict:R.bool,ignoreQueryParams:R.bool,onClick:R.func,onMouseOver:R.func,successCallback:R.func,errorCallback:R.func},w.defaultProps={activeClassName:"active",activeStrict:!1,ignoreQueryParams:!0,routeParams:{},routeOptions:{}};var P=function(e){return e.displayName||e.name||"Component"},_="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)};function N(e){return e.split(".").reduce(function(e,t){return e.concat(e.length?e[e.length-1]+"."+t:t)},[])}function S(e){return e&&e.meta&&e.meta.params}function E(e,t){return S(t)&&(void 0!==(r=t.meta.params[e])&&null!==r)?Object.keys(t.meta.params[e]).reduce(function(e,r){return e[r]=t.params[r],e},{}):{};var r}function C(e){return function(t,r){var n=function(e,t){var r=t?N(t.name):[],n=N(e.name),o=Math.min(r.length,n.length),i=void 0;i=t&&(S(t)||S(e))?function(){var i=void 0,u=function(){var o=r[i],u=n[i];if(o!==u)return{v:i};var a=E(o,e),c=E(u,t);return a.length!==c.length?{v:i}:0===a.length?"continue":Object.keys(a).some(function(e){return c[e]!==a[e]})?{v:i}:void 0};for(i=0;i<o;i+=1){var a=u();switch(a){case"continue":continue;default:if("object"===(void 0===a?"undefined":_(a)))return a.v}}return i}():0;var u=r.slice(i).reverse(),a=n.slice(i);return{intersection:t&&i>0?r[i-1]:"",toDeactivate:u,toActivate:a}}(t,r),o=n.intersection,i=n.toActivate,u=n.toDeactivate,a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(u)).reverse();if(t.meta.options&&t.meta.options.reload)return!0;if(e===o)return!0;if(-1===i.indexOf(e))return!1;for(var c=!0,s=0;s<i.length;s+=1){var l=i[s];if((c=l===a[s])&&l===e)return!0;if(!c)return!1}return!1}}var x=function(e){function r(e,t){s(this,r);var n=d(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.router=e.router,n}return p(r,e),l(r,[{key:"getChildContext",value:function(){return{router:this.router}}},{key:"componentWillReceiveProps",value:function(e){this.props.router!==e.router&&console.error("[react-router5][RouterProvider] does not support changing the router object.")}},{key:"render",value:function(){var e=this.props.children;return t.Children.only(e)}}]),r}(t.Component);function T(e){var r=function(r){function n(e,t){s(this,n);var r=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));if(r.router=t.router,r.routeState={previousRoute:null,route:r.router.getState()},r.mounted=!1,"undefined"!=typeof window){r.unsubscribe=r.router.subscribe(function(e){var t=e.route,n=e.previousRoute;r.routeState={route:t,previousRoute:n},r.mounted&&r.forceUpdate()})}return r}return p(n,r),l(n,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){return t.createElement(e,f({},this.props,this.routeState,{router:this.router}))}}]),n}(t.Component);return r.contextTypes={router:R.object.isRequired},r.displayName="WithRoute["+P(e)+"]",r}x.propTypes={router:R.object.isRequired,children:R.element.isRequired},x.childContextTypes={router:R.object.isRequired};var A=(r.createContext||function(){return{Provider:function(e){return e.children},Consumer:function(){return null}}})({}),I=A.Provider,q=A.Consumer,D=function(e){function t(e){s(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=e.router;if(r.mounted=!1,r.router=n,r.routeState={route:n.getState(),previousRoute:null},"undefined"!=typeof window){r.unsubscribe=r.router.subscribe(function(e){var t=e.route,n=e.previousRoute;r.routeState={route:t,previousRoute:n},r.mounted&&r.forceUpdate()})}return r}return p(t,e),l(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"getChildContext",value:function(){return{router:this.props.router}}},{key:"render",value:function(){var e=f({router:this.props.router},this.routeState);return r.createElement(I,{value:e},this.props.children)}}]),t}(r.PureComponent);D.childContextTypes={router:R.object.isRequired},D.propTypes={router:R.object.isRequired,children:R.node.isRequired};var U=function(e){function t(e,r){s(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.renderOnRouteNodeChange=n.renderOnRouteNodeChange.bind(n),n}return p(t,e),l(t,[{key:"renderOnRouteNodeChange",value:function(e){var t=C(this.props.nodeName)(e.route,e.previousRoute);return this.memoizedResult&&!t||(this.memoizedResult=this.props.children(e)),this.memoizedResult}},{key:"render",value:function(){return r.createElement(q,null,this.renderOnRouteNodeChange)}}]),t}(r.Component);U.propTypes={nodeName:R.string.isRequired,children:R.func.isRequired};var V=T(w);e.BaseLink=w,e.routeNode=function(e){return function(r){var n=function(n){function o(t,r){s(this,o);var n=d(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,r));return n.router=r.router,n.routeState={previousRoute:null,route:n.router.getState()},n.mounted=!1,"undefined"!=typeof window&&(n.unsubscribe=n.router.subscribe(function(t){var r=t.route,o=t.previousRoute;C(e)(r,o)&&(n.routeState={previousRoute:o,route:r},n.mounted&&n.forceUpdate())})),n}return p(o,n),l(o,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e=this.props,n=this.router,o=this.routeState,i=o.previousRoute,u=o.route;return t.createElement(r,f({},e,{router:n,previousRoute:i,route:u}))}}]),o}(t.Component);return n.contextTypes={router:R.object.isRequired},n.displayName="RouteNode["+P(r)+"]",n}},e.RouterProvider=x,e.withRoute=T,e.withRouter=function(e){var r=function(r){function n(e,t){s(this,n);var r=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.router=t.router,r}return p(n,r),l(n,[{key:"render",value:function(){return t.createElement(e,f({},this.props,{router:this.router}))}}]),n}(t.Component);return r.contextTypes={router:R.object.isRequired},r.displayerName="WithRouter["+P(e)+"]",r},e.Link=V,e.RouteProvider=D,e.Route=q,e.RouteNode=U,Object.defineProperty(e,"__esModule",{value:!0})});
